{"version":3,"sources":["../src/cli.ts","../src/utils/json.ts"],"sourcesContent":["#!/usr/bin/env node\nimport yargs from \"yargs/yargs\";\nimport { hideBin } from \"yargs/helpers\";\nimport { diffReports } from \"./diffReports\";\nimport { readJson } from \"./utils/json\";\nimport fs from \"fs\";\n\nyargs(hideBin(process.argv))\n  .scriptName(\"aave-report-engine\")\n  .usage(\"$0 <cmd> [args]\")\n  .command<{ from: string; to: string; out: string }>(\n    \"diff [from] [to] [out]\",\n    \"diffs two json reports\",\n    (yargs) => {\n      yargs.positional(\"from\", {\n        type: \"string\",\n        describe: \"the initial json\",\n      });\n      yargs.positional(\"to\", {\n        type: \"string\",\n        describe: \"the final json\",\n      });\n      yargs.positional(\"out\", {\n        type: \"string\",\n        describe: \"the output path & filename\",\n      });\n    },\n    async function (argv) {\n      const from = readJson(argv.from);\n      const to = readJson(argv.to);\n      const content = await diffReports(from, to);\n      fs.writeFileSync(argv.out, content);\n    }\n  )\n  .help().argv;\n","import JSONbig from \"json-bigint\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function readJson(filePath: string) {\n  const content = fs.readFileSync(path.join(process.cwd(), filePath));\n  return JSON.parse(\n    JSON.stringify(JSONbig({ storeAsString: true }).parse(content))\n  );\n}\n"],"mappings":";;;;;;AACA,OAAO,WAAW;AAClB,SAAS,eAAe;;;ACFxB,OAAO,aAAa;AACpB,OAAO,QAAQ;AACf,OAAO,UAAU;AAEV,SAAS,SAAS,UAAkB;AACzC,QAAM,UAAU,GAAG,aAAa,KAAK,KAAK,QAAQ,IAAI,GAAG,QAAQ,CAAC;AAClE,SAAO,KAAK;AAAA,IACV,KAAK,UAAU,QAAQ,EAAE,eAAe,KAAK,CAAC,EAAE,MAAM,OAAO,CAAC;AAAA,EAChE;AACF;;;ADJA,OAAOA,SAAQ;AAEf,MAAM,QAAQ,QAAQ,IAAI,CAAC,EACxB,WAAW,oBAAoB,EAC/B,MAAM,iBAAiB,EACvB;AAAA,EACC;AAAA,EACA;AAAA,EACA,CAACC,WAAU;AACT,IAAAA,OAAM,WAAW,QAAQ;AAAA,MACvB,MAAM;AAAA,MACN,UAAU;AAAA,IACZ,CAAC;AACD,IAAAA,OAAM,WAAW,MAAM;AAAA,MACrB,MAAM;AAAA,MACN,UAAU;AAAA,IACZ,CAAC;AACD,IAAAA,OAAM,WAAW,OAAO;AAAA,MACtB,MAAM;AAAA,MACN,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EACA,eAAgB,MAAM;AACpB,UAAM,OAAO,SAAS,KAAK,IAAI;AAC/B,UAAM,KAAK,SAAS,KAAK,EAAE;AAC3B,UAAM,UAAU,MAAM,YAAY,MAAM,EAAE;AAC1C,IAAAD,IAAG,cAAc,KAAK,KAAK,OAAO;AAAA,EACpC;AACF,EACC,KAAK,EAAE;","names":["fs","yargs"]}