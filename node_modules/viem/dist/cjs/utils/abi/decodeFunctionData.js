"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.decodeFunctionData = void 0;
const index_js_1 = require("../../errors/index.js");
const index_js_2 = require("../data/index.js");
const index_js_3 = require("../hash/index.js");
const decodeAbiParameters_js_1 = require("./decodeAbiParameters.js");
const formatAbiItem_js_1 = require("./formatAbiItem.js");
function decodeFunctionData({ abi, data, }) {
    const signature = (0, index_js_2.slice)(data, 0, 4);
    const description = abi.find((x) => x.type === 'function' &&
        signature === (0, index_js_3.getFunctionSelector)((0, formatAbiItem_js_1.formatAbiItem)(x)));
    if (!description)
        throw new index_js_1.AbiFunctionSignatureNotFoundError(signature, {
            docsPath: '/docs/contract/decodeFunctionData',
        });
    return {
        functionName: description.name,
        args: ('inputs' in description &&
            description.inputs &&
            description.inputs.length > 0
            ? (0, decodeAbiParameters_js_1.decodeAbiParameters)(description.inputs, (0, index_js_2.slice)(data, 4))
            : undefined),
    };
}
exports.decodeFunctionData = decodeFunctionData;
//# sourceMappingURL=decodeFunctionData.js.map