"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.recoverPublicKey = void 0;
const index_js_1 = require("../data/index.js");
const index_js_2 = require("../encoding/index.js");
async function recoverPublicKey({ hash, signature, }) {
    const signatureHex = (0, index_js_1.isHex)(signature) ? signature : (0, index_js_2.toHex)(signature);
    const hashHex = (0, index_js_1.isHex)(hash) ? hash : (0, index_js_2.toHex)(hash);
    const v = (0, index_js_2.hexToNumber)(`0x${signatureHex.slice(130)}`);
    const { secp256k1 } = await import('@noble/curves/secp256k1');
    const publicKey = secp256k1.Signature.fromCompact(signatureHex.substring(2, 130))
        .addRecoveryBit(v - 27)
        .recoverPublicKey(hashHex.substring(2))
        .toHex(false);
    return `0x${publicKey}`;
}
exports.recoverPublicKey = recoverPublicKey;
//# sourceMappingURL=recoverPublicKey.js.map